import{_ as t,o as s,c as a,a as n}from"./app.cf68ed47.js";const F=JSON.parse('{"title":"\u53D1\u9001 HTTP \u8BF7\u6C42","description":"","frontmatter":{},"headers":[{"level":2,"title":"GET","slug":"get","link":"#get","children":[]},{"level":2,"title":"POST","slug":"post","link":"#post","children":[]},{"level":2,"title":"\u53D1\u9001 form \u8868\u5355\u8BF7\u6C42","slug":"\u53D1\u9001-form-\u8868\u5355\u8BF7\u6C42","link":"#\u53D1\u9001-form-\u8868\u5355\u8BF7\u6C42","children":[]},{"level":2,"title":"\u6587\u4EF6\u4E0A\u4F20","slug":"\u6587\u4EF6\u4E0A\u4F20","link":"#\u6587\u4EF6\u4E0A\u4F20","children":[]},{"level":2,"title":"\u81EA\u5B9A\u4E49\u8BF7\u6C42","slug":"\u81EA\u5B9A\u4E49\u8BF7\u6C42","link":"#\u81EA\u5B9A\u4E49\u8BF7\u6C42","children":[]},{"level":2,"title":"\u4E0B\u8F7D\u6587\u4EF6","slug":"\u4E0B\u8F7D\u6587\u4EF6","link":"#\u4E0B\u8F7D\u6587\u4EF6","children":[{"level":3,"title":"\u540C\u6B65\u4E0B\u8F7D","slug":"\u540C\u6B65\u4E0B\u8F7D","link":"#\u540C\u6B65\u4E0B\u8F7D","children":[]}]}],"relativePath":"develop/advanced/httpRequests.md","lastUpdated":1683455999000}'),e={name:"develop/advanced/httpRequests.md"},o=n(`<h1 id="\u53D1\u9001-http-\u8BF7\u6C42" tabindex="-1">\u53D1\u9001 HTTP \u8BF7\u6C42 <a class="header-anchor" href="#\u53D1\u9001-http-\u8BF7\u6C42" aria-hidden="true">#</a></h1><p>AmiyaBot \u5185\u7F6E\u4E86\u5F02\u6B65\u7684 HTTP \u8BF7\u6C42\u5DE5\u5177\uFF0C\u57FA\u4E8E <a href="https://github.com/aio-libs/aiohttp" target="_blank" rel="noreferrer">aiohttp</a>\u3002</p><div class="danger custom-block"><p class="custom-block-title">\u4E0D\u63A8\u8350\u4F7F\u7528 requests \u5E93<br></p><p>requests \u662F\u8457\u540D\u7684 python http \u8BF7\u6C42\u5DE5\u5177\u5E93\u3002\u4F46\u5176\u8BF7\u6C42\u65B9\u6CD5\u5747\u4E3A<strong>\u540C\u6B65</strong>\u7684\u3002AmiyaBot \u4E3A\u5F02\u6B65\u7A0B\u5E8F\uFF0C\u4F7F\u7528\u540C\u6B65\u8BF7\u6C42\u5C06\u4F1A\u963B\u585E\u4E3B\u7EBF\u7A0B\u8FD0\u884C\u3002</p><p>\u5982\u679C\u662F<strong>\u65E0\u6CD5\u5E72\u9884\u7684</strong>\u540C\u6B65\u8BF7\u6C42\u884C\u4E3A\uFF0C\u53EF\u4EE5\u4F7F\u7528\u5185\u7F6E\u7684\u7EBF\u7A0B\u6C60\u65B9\u6CD5\u66F4\u53D8\u4E3A\u5F02\u6B65\u3002\u8BE6\u89C1 <a href="/develop/advanced/blockingIO.html">\u5904\u7406\u963B\u585E\u64CD\u4F5C</a>\u3002</p></div><p>\u76F4\u63A5\u5F15\u5165 <code>http_requests</code> \u5B9E\u4F8B\u548C <code>download_async</code> \u65B9\u6CD5\u5373\u53EF\u4F7F\u7528\u3002</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> amiyabot</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">network</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">httpRequests </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> http_requests</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> amiyabot</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">network</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">download </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> download_async</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post_form</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post_upload</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">download_async</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><p><code>http_requests</code> \u7684\u8BF7\u6C42\u5747\u8FD4\u56DE<strong>\u5B57\u7B26\u4E32</strong>\u7684\u8BF7\u6C42\u7ED3\u679C\u3002<code>download_async</code> \u65B9\u6CD5\u5219\u9ED8\u8BA4\u8FD4\u56DE <strong>bytes</strong> \u7ED3\u679C\u3002</p><h2 id="get" tabindex="-1">GET <a class="header-anchor" href="#get" aria-hidden="true">#</a></h2><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570\u540D</th><th>\u7C7B\u578B</th><th>\u91CA\u4E49</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>interface</td><td>String</td><td>\u8BF7\u6C42\u5730\u5740</td><td></td></tr><tr><td>**kwargs</td><td></td><td><a href="https://github.com/aio-libs/aiohttp/blob/master/aiohttp/client.py#L316" target="_blank" rel="noreferrer">request \u53C2\u6570</a></td><td></td></tr></tbody></table><h2 id="post" tabindex="-1">POST <a class="header-anchor" href="#post" aria-hidden="true">#</a></h2><p>post \u65B9\u6CD5\u9ED8\u8BA4\u5728\u8BF7\u6C42\u5934\u5185\u6DFB\u52A0 <code>&#39;Content-Type&#39;: &#39;application/json&#39;</code>\uFF0C\u8BF7\u6C42\u4F53<strong>\u4EC5\u63A5\u53D7\u5B57\u5178\u6216\u5217\u8868\u7C7B\u578B\u6570\u636E</strong>\u3002</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570\u540D</th><th>\u7C7B\u578B</th><th>\u91CA\u4E49</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>interface</td><td>String</td><td>\u8BF7\u6C42\u5730\u5740</td><td></td></tr><tr><td>payload</td><td>Union[Dict, List]</td><td>\u8BF7\u6C42\u4F53</td><td></td></tr><tr><td>headers</td><td>Dict</td><td>\u8FFD\u52A0\u7684\u8BF7\u6C42\u5934</td><td></td></tr><tr><td>**kwargs</td><td></td><td><a href="https://github.com/aio-libs/aiohttp/blob/master/aiohttp/client.py#L316" target="_blank" rel="noreferrer">request \u53C2\u6570</a></td><td></td></tr></tbody></table><h2 id="\u53D1\u9001-form-\u8868\u5355\u8BF7\u6C42" tabindex="-1">\u53D1\u9001 form \u8868\u5355\u8BF7\u6C42 <a class="header-anchor" href="#\u53D1\u9001-form-\u8868\u5355\u8BF7\u6C42" aria-hidden="true">#</a></h2><p>post_form \u65B9\u6CD5\u7C7B\u4F3C post \u65B9\u6CD5\u3002\u552F\u4E00\u4E0D\u540C\u7684\u662F\u8BF7\u6C42\u4F53\u4EC5\u63A5\u53D7<strong>\u5B57\u5178\u7C7B\u578B</strong>\uFF0C\u53D1\u9001\u8BF7\u6C42\u65F6\u4F1A\u88AB\u6784\u5EFA\u4E3A form data \u8868\u5355\u6570\u636E\u3002</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post_form</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570\u540D</th><th>\u7C7B\u578B</th><th>\u91CA\u4E49</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>interface</td><td>String</td><td>\u8BF7\u6C42\u5730\u5740</td><td></td></tr><tr><td>payload</td><td>Dict</td><td>\u8BF7\u6C42\u4F53</td><td></td></tr><tr><td>headers</td><td>Dict</td><td>\u8FFD\u52A0\u7684\u8BF7\u6C42\u5934</td><td></td></tr><tr><td>**kwargs</td><td></td><td><a href="https://github.com/aio-libs/aiohttp/blob/master/aiohttp/client.py#L316" target="_blank" rel="noreferrer">request \u53C2\u6570</a></td><td></td></tr></tbody></table><h2 id="\u6587\u4EF6\u4E0A\u4F20" tabindex="-1">\u6587\u4EF6\u4E0A\u4F20 <a class="header-anchor" href="#\u6587\u4EF6\u4E0A\u4F20" aria-hidden="true">#</a></h2><p>\u6587\u4EF6\u4E0A\u4F20 post_upload \u65B9\u6CD5\u4EE5 form \u8868\u5355\u7684\u65B9\u5F0F\u63D0\u4EA4\u6587\u4EF6\u3002</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post_upload</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570\u540D</th><th>\u7C7B\u578B</th><th>\u91CA\u4E49</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>interface</td><td>String</td><td>\u8BF7\u6C42\u5730\u5740</td><td></td></tr><tr><td>file</td><td>Bytes</td><td>\u6587\u4EF6 bytes</td><td></td></tr><tr><td>file_field</td><td>String</td><td>\u8868\u5355\u6570\u636E\u4E2D\u5B58\u653E\u6587\u4EF6\u7684\u5B57\u6BB5\u540D</td><td>file</td></tr><tr><td>payload</td><td>Dict</td><td>\u8BF7\u6C42\u4F53</td><td></td></tr><tr><td>headers</td><td>Dict</td><td>\u8FFD\u52A0\u7684\u8BF7\u6C42\u5934</td><td></td></tr><tr><td>**kwargs</td><td></td><td><a href="https://github.com/aio-libs/aiohttp/blob/master/aiohttp/client.py#L316" target="_blank" rel="noreferrer">request \u53C2\u6570</a></td><td></td></tr></tbody></table><h2 id="\u81EA\u5B9A\u4E49\u8BF7\u6C42" tabindex="-1">\u81EA\u5B9A\u4E49\u8BF7\u6C42 <a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u8BF7\u6C42" aria-hidden="true">#</a></h2><p>\u5982\u679C\u9700\u8981\u53D1\u9001\u66F4\u591A\u7C7B\u578B\u7684\u8BF7\u6C42\uFF0C\u5982 <code>PUT</code>\u3001<code>PATCH</code>\u3001<code>DELETE</code> \u7B49\uFF0C\u6216\u9700\u8981\u81EA\u5B9A\u4E49\u66F4\u591A\u7684\u8BF7\u6C42\u573A\u666F\uFF0C\u53EF\u4F7F\u7528 request \u65B9\u6CD5\u3002</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> http_requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570\u540D</th><th>\u7C7B\u578B</th><th>\u91CA\u4E49</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>\u8BF7\u6C42\u5730\u5740</td><td></td></tr><tr><td>method</td><td>Dict</td><td>\u8BF7\u6C42\u65B9\u6CD5</td><td>post</td></tr><tr><td>request_name</td><td>Dict</td><td>\u8BF7\u6C42\u8FC7\u7A0B\u7684 LOG \u6807\u8BC6</td><td></td></tr><tr><td>**kwargs</td><td></td><td><a href="https://github.com/aio-libs/aiohttp/blob/master/aiohttp/client.py#L316" target="_blank" rel="noreferrer">request \u53C2\u6570</a></td><td></td></tr></tbody></table><h2 id="\u4E0B\u8F7D\u6587\u4EF6" tabindex="-1">\u4E0B\u8F7D\u6587\u4EF6 <a class="header-anchor" href="#\u4E0B\u8F7D\u6587\u4EF6" aria-hidden="true">#</a></h2><p>download_async \u662F\u63D0\u4F9B\u7684\u5F02\u6B65\u4E0B\u8F7D\u6587\u4EF6\u7684\u65B9\u6CD5\u3002\u9ED8\u8BA4\u8FD4\u56DE bytes \u7C7B\u578B\u7684\u6570\u636E\u3002</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bytes</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">download_async</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570\u540D</th><th>\u7C7B\u578B</th><th>\u91CA\u4E49</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>\u8BF7\u6C42\u5730\u5740</td><td></td></tr><tr><td>headers</td><td>Dict</td><td>\u8FFD\u52A0\u7684\u8BF7\u6C42\u5934</td><td></td></tr><tr><td>stringify</td><td>Bool</td><td>\u662F\u5426\u8FD4\u56DE\u5B57\u7B26\u4E32\u7ED3\u679C</td><td>False</td></tr><tr><td>**kwargs</td><td></td><td><a href="https://github.com/aio-libs/aiohttp/blob/master/aiohttp/client.py#L316" target="_blank" rel="noreferrer">request \u53C2\u6570</a></td><td></td></tr></tbody></table><h3 id="\u540C\u6B65\u4E0B\u8F7D" tabindex="-1">\u540C\u6B65\u4E0B\u8F7D <a class="header-anchor" href="#\u540C\u6B65\u4E0B\u8F7D" aria-hidden="true">#</a></h3><p>\u5982\u67D0\u4E9B\u573A\u666F\u9700\u8981\u4F7F\u7528\u540C\u6B65\u4E0B\u8F7D\uFF0C\u53EF\u4F7F\u7528\u540C\u6A21\u5757\u4E2D\u7684 download_async \u65B9\u6CD5\u3002</p><div class="language-python"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> amiyabot</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">network</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">download </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> download_sync</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bytes</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">download_sync</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570\u540D</th><th>\u7C7B\u578B</th><th>\u91CA\u4E49</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>url</td><td>String</td><td>\u8BF7\u6C42\u5730\u5740</td><td></td></tr><tr><td>headers</td><td>Dict</td><td>\u8FFD\u52A0\u7684\u8BF7\u6C42\u5934</td><td></td></tr><tr><td>stringify</td><td>Bool</td><td>\u662F\u5426\u8FD4\u56DE\u5B57\u7B26\u4E32\u7ED3\u679C</td><td>False</td></tr><tr><td>progress</td><td>Bool</td><td>\u662F\u5426\u663E\u793A\u8FDB\u5EA6\u6761</td><td>False</td></tr><tr><td>**kwargs</td><td></td><td><a href="https://github.com/psf/requests/blob/main/requests/api.py#L14" target="_blank" rel="noreferrer">request \u53C2\u6570</a></td><td></td></tr></tbody></table>`,33),l=[o];function p(r,d,c,h,i,y){return s(),a("div",null,l)}const A=t(e,[["render",p]]);export{F as __pageData,A as default};
